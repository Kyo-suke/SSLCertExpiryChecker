var SSLCertChecker;
(function(b){var e=function(){function a(){throw Error("Inqueryer is static class.");}a.inquery=function(c){var d=this;void 0===c&&(c=null);try{var a={type:"POST",url:b.TARGET_CGI,cache:!1,dataType:"json",async:!0};console.log("inquery to "+b.TARGET_CGI);jQuery.ajax(a).done(function(a){d._status="ok";d._result=a;console.log("success to inquery. status: "+d._status);c&&c(a)}).fail(function(a){d._status="ng";d._result=null;console.error("failed to inquery. status: "+d._status);console.error(JSON.stringify(a));c&&
c(null)})}catch(h){this._status="ng",this._result=null,console.error("failed to inquery."),console.error(h.message),console.error(h.stack)}};a._getDateString=function(c){function d(c,d,a){var b="";try{b=(Array(a+1).join(d.slice(0,1))+c).slice(-1*a)}catch(m){b=""+c}return b}function a(c){var a=Math.abs(100*c.getTimezoneOffset()/60);return(0<c.getTimezoneOffset()?"-":"+")+d(a,"0",4)}if(!c)return"-";var b="";try{var f=new Date(c);b+=d(f.getFullYear(),"0",4);b+="/"+d(f.getMonth()+1,"0",2);b+="/"+d(f.getDate(),
"0",2);b+=" "+d(f.getHours(),"0",2);b+=":"+d(f.getMinutes(),"0",2);b+=":"+d(f.getSeconds(),"0",2);b+=" "+a(f)}catch(l){b=c}return b};a.getCertStatusList=function(){if(!this._result)return[];for(var c=[],a=0;a<this._result.results.length;a++){var b=this._result.results[a];b={hostname:b.hostname,status:b.status,sdate:this._getDateString(b.sdate),edate:this._getDateString(b.edate),version:b.version};c.push(b)}return c};Object.defineProperty(a,"data",{get:function(){return this._result},enumerable:!0,
configurable:!0});Object.defineProperty(a,"status",{get:function(){return this._status},enumerable:!0,configurable:!0});a._status="ready";a._result=null;return a}();b.Inqueryer=e})(SSLCertChecker||(SSLCertChecker={}));
(function(b){var e=function(){function a(){throw Error("Inqueryer is static class.");}a.initialize=function(){this.unbind();this.bind();jQuery("[data-toggle='tooltip'").tooltip();this.initDataTables()};a.bind=function(){jQuery("#"+this.CSV_DOWNLOAD_BUTTON_ID).on("click",function(){b.CSVDownloader.download()});jQuery("#"+this.RELOAD_BUTTON_ID).on("click",function(){window.location.reload()})};a.unbind=function(){jQuery("#"+this.CSV_DOWNLOAD_BUTTON_ID).off();jQuery("#"+this.RELOAD_BUTTON_ID).off()};
a.showLoading=function(c){var a=jQuery("#"+this.LOADING_ID);c?a.addClass("loaded"):a.removeClass("loaded")};a.initDataTables=function(){jQuery.extend(jQuery.fn.dataTable.defaults,{language:this.DATATABLES_JP})};a.setTableRow=function(a){jQuery("#"+this.TABLE_ID).DataTable({data:a,columns:[{data:"hostname",render:function(a){return'<a href="https://'+a+'" target="_blank">'+a+"</a>"}},{data:"status"},{data:"sdate"},{data:"edate"}],scrollCollapse:!0,pageLength:50,rowCallback:function(a,c){switch(c.status){case "valid":jQuery(a).addClass("valid");
break;case "warn":jQuery(a).addClass("warn");break;case "expired":jQuery(a).addClass("expired");break;default:jQuery(a).addClass("unknown")}}})};a.clearTable=function(){jQuery("#"+this.TABLE_ID+" tbody").empty()};a.TABLE_ID="ssl-cert-status";a.LOADING_ID="loading";a.CSV_DOWNLOAD_BUTTON_ID="csv-download-button";a.RELOAD_BUTTON_ID="reload-button";a.DATATABLES_JP={sProcessing:"\u51e6\u7406\u4e2d...",sLengthMenu:"_MENU_ \u4ef6\u8868\u793a",sZeroRecords:"\u30c7\u30fc\u30bf\u306f\u3042\u308a\u307e\u305b\u3093\u3002",
sInfo:" _TOTAL_ \u4ef6\u4e2d _START_ \u304b\u3089 _END_ \u307e\u3067\u8868\u793a",sInfoEmpty:" 0 \u4ef6\u4e2d 0 \u304b\u3089 0 \u307e\u3067\u8868\u793a",sInfoFiltered:"\uff08\u5168 _MAX_ \u4ef6\u3088\u308a\u62bd\u51fa\uff09",sInfoPostFix:"",sSearch:"\u691c\u7d22:",sUrl:"",oPaginate:{sFirst:"\u5148\u982d",sPrevious:"\u524d",sNext:"\u6b21",sLast:"\u6700\u7d42"}};return a}();b.UIManager=e})(SSLCertChecker||(SSLCertChecker={}));
(function(b){function e(a){b.UIManager.clearTable();b.UIManager.showLoading(!0);a&&(a=b.Inqueryer.getCertStatusList(),b.UIManager.setTableRow(a))}b.TARGET_CGI="./GetSSLCertStatus.cgi";b.update=e;b.main=function(){b.UIManager.initialize();b.Inqueryer.inquery(e)};document.addEventListener("DOMContentLoaded",function(){b.main()})})(SSLCertChecker||(SSLCertChecker={}));
(function(b){var e=function(){function a(){throw Error("Downloader is static class.");}a._makeCSVBlob=function(a,d,k){a||(a="text/csv");"boolean"!==typeof d&&(d=!0);k||(k="crlf");try{var c=b.Inqueryer.getCertStatusList(),f=[];d&&f.push(this.BOM);var l=this._getLineFeedCode(k);f.push("\u30db\u30b9\u30c8\u540d,\u8a3c\u660e\u66f8\u72b6\u614b,\u671f\u9650\u958b\u59cb\u65e5,\u671f\u9650\u7d42\u4e86\u65e5"+l);for(d=0;d<c.length;d++){var g=c[d],e=[g.hostname,g.status,g.sdate,g.edate].join();f.push(e+l)}var p=
new Blob(f,{type:a})}catch(m){console.error("failed to make blob."),console.error(m.message),console.error(m.stack)}return p};a._getLineFeedCode=function(a){switch(a){case "cr":a="\r";break;case "lf":a="\n";break;case "crlf":a="\r\n";break;default:throw Error("Invalid linefeed code.");}return a};a._getFilename=function(a){function c(a,c,b){var d="";try{d=(Array(b+1).join(c.slice(0,1))+a).slice(-1*b)}catch(p){d=""+a}return d}a||(a=this.DEFAULT_FILENAME);var b=new Date,e=[c(b.getFullYear(),"0",4),c(b.getMonth()+
1,"0",2),c(b.getDate(),"0",2)].join("");a=a.replace("%d",e);b=[c(b.getHours(),"0",2),c(b.getMinutes(),"0",2),c(b.getSeconds(),"0",2)].join("");return a=a.replace("%t",b)};a.download=function(a,b,e,h){var c=this;b=this._makeCSVBlob(b,e,h);a=this._getFilename(a);if(navigator.msSaveBlob)navigator.msSaveBlob(b,a);else{var d=null;try{var g=this._createLinkElement();d=URL.createObjectURL(b);this._setAttributes(g,a,d);g.click();setTimeout(function(){c._revoke(d)},this.REVOKE_TIMEOUT)}catch(n){console.error("failed to download."),
console.error(n.meesage),console.error(n.stack),this._removeLinkElement(),d&&this._revoke(d)}}};a._revoke=function(a){URL.revokeObjectURL(a);this._removeLinkElement()};a._createLinkElement=function(){document.querySelector("#"+this.ELEMENT_ID)&&this._removeLinkElement();var a=document.createElement("a");a.setAttribute("id",this.ELEMENT_ID);a.setAttribute("download","");a.setAttribute("target","_blank");a.setAttribute("href","");a.setAttribute("style","display: block; visibility: hidden; width: 0; height: 0;");
return document.body.appendChild(a)};a._removeLinkElement=function(){var a=document.querySelector("#"+this.ELEMENT_ID);a&&document.body.removeChild(a)};a._setAttributes=function(a,b,e){a.setAttribute("download",b);a.setAttribute("href",e);return a};a.ELEMENT_ID="csv-downloader";a.DEFAULT_FILENAME="%d_%t.csv";a.REVOKE_TIMEOUT=5E3;a.BOM=new Uint8Array([239,187,191]);return a}();b.CSVDownloader=e})(SSLCertChecker||(SSLCertChecker={}));
