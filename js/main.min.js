var SSLCertChecker;
(function(b){function h(a){e.clearTable();e.showLoading(!0);a&&(a=f.getCertStatusList(),e.setTableRow(a))}b.TARGET_CGI="./GetSSLCertStatus.cgi";var f=function(){function a(){throw Error("Inqueryer is static class.");}a.inquery=function(a){var c=this;void 0===a&&(a=null);try{var g={type:"POST",url:b.TARGET_CGI,cache:!1,dataType:"json",async:!0};console.log("inquery to "+b.TARGET_CGI);jQuery.ajax(g).done(function(d){c._status="ok";c._result=d;console.log("success to inquery. status: "+c._status);a&&
a(d)}).fail(function(d){c._status="ng";c._result=null;console.error("failed to inquery. status: "+c._status);console.error(JSON.stringify(d));a&&a(null)})}catch(d){this._status="ng",this._result=null,console.error("failed to inquery."),console.error(d.message),console.error(d.stack)}};a.getDateString=function(a){function c(a,c,d){var b="";try{b=(Array(d+1).join(c.slice(0,1))+a).slice(-1*d)}catch(l){b=""+a}return b}function g(a){var b=Math.abs(100*a.getTimezoneOffset()/60);return(0<a.getTimezoneOffset()?
"-":"+")+c(b,"0",4)}if(!a)return"-";var d="";try{var b=new Date(a);d+=c(b.getFullYear(),"0",4);d+="/"+c(b.getMonth()+1,"0",2);d+="/"+c(b.getDate(),"0",2);d+=" "+c(b.getHours(),"0",2);d+=":"+c(b.getMinutes(),"0",2);d+=":"+c(b.getSeconds(),"0",2);d+=" "+g(b)}catch(k){d=a}return d};a.getCertStatusList=function(){if(!this._result)return[];for(var a=[],c=0;c<this._result.results.length;c++){var b=this._result.results[c];b={hostname:b.hostname,status:b.status,sdate:this.getDateString(b.sdate),edate:this.getDateString(b.edate),
version:b.version};a.push(b)}return a};Object.defineProperty(a,"data",{get:function(){return this._result},enumerable:!0,configurable:!0});Object.defineProperty(a,"status",{get:function(){return this._status},enumerable:!0,configurable:!0});a._status="ready";a._result=null;return a}();b.Inqueryer=f;var e=function(){function a(){throw Error("Inqueryer is static class.");}a.showLoading=function(a){var b=jQuery("#"+this.LOADING_ID);a?b.addClass("loaded"):b.removeClass("loaded")};a.initDataTables=function(){jQuery.extend(jQuery.fn.dataTable.defaults,
{language:this.DATATABLES_JP})};a.setTableRow=function(a){jQuery("#"+this.TABLE_ID).DataTable({data:a,columns:[{data:"hostname"},{data:"status"},{data:"sdate"},{data:"edate"}],scrollCollapse:!0,pageLength:50,rowCallback:function(a,b){switch(b.status){case "valid":jQuery(a).addClass("valid");break;case "warn":jQuery(a).addClass("warn");break;case "expired":jQuery(a).addClass("expired");break;default:jQuery(a).addClass("unknown")}}})};a.clearTable=function(){jQuery("#"+this.TABLE_ID+" tbody").empty()};
a.TABLE_ID="ssl-cert-status";a.LOADING_ID="loading";a.DATATABLES_JP={sProcessing:"\u51e6\u7406\u4e2d...",sLengthMenu:"_MENU_ \u4ef6\u8868\u793a",sZeroRecords:"\u30c7\u30fc\u30bf\u306f\u3042\u308a\u307e\u305b\u3093\u3002",sInfo:" _TOTAL_ \u4ef6\u4e2d _START_ \u304b\u3089 _END_ \u307e\u3067\u8868\u793a",sInfoEmpty:" 0 \u4ef6\u4e2d 0 \u304b\u3089 0 \u307e\u3067\u8868\u793a",sInfoFiltered:"\uff08\u5168 _MAX_ \u4ef6\u3088\u308a\u62bd\u51fa\uff09",sInfoPostFix:"",sSearch:"\u691c\u7d22:",sUrl:"",oPaginate:{sFirst:"\u5148\u982d",
sPrevious:"\u524d",sNext:"\u6b21",sLast:"\u6700\u7d42"}};return a}();b.UIManager=e;b.update=h;b.main=function(){jQuery("[data-toggle='tooltip'").tooltip();e.initDataTables();f.inquery(h)};document.addEventListener("DOMContentLoaded",function(){b.main()})})(SSLCertChecker||(SSLCertChecker={}));
